import pygame
from random import choice
window = pygame.display.set_mode((400,400))
caption = "Hello Pygame!"
pygame.display.set_caption(caption)

screen = pygame.Surface((400, 400))

###Class For Target
class Sprite:
	def __init__(self, xpos, ypos, filename):
		self.x = xpos
		self.y = ypos
		self.bitmap = pygame.image.load(filename)
		self.bitmap.set_colorkey((0,0,0))
	def render(self):
		screen.blit(self.bitmap, (self.x, self.y))

class Snake:
	def __init__(self, xpos, ypos, filename):
		self.x = xpos
		self.y = ypos
		self.bitmap = pygame.image.load(filename)
		self.bitmap.set_colorkey((0,0,0))
		self.tail = list()
		self.length = 1
		self.side = 1
	def render(self):
		screen.blit(self.bitmap, (self.x, self.y))
		if self.tail:
			for each in self.tail[1:]:
				each.render()
	def check(self, other):
		if self.x == other.x and self.y == other.y:
			return True
		if self.tail:
			for each in self.tail[1:]:
				if each.x == other.x and each.y == other.y:
					return True
	def update(self):
		if self.side == 1:
			self.x += 40
		elif self.side == 2:
			self.y += 40
		elif self.side == 3:
			self.x -= 40
		elif self.side == 4:
			self.y -= 40
	def correct(self):
		if self.x > 400-40: self.x = 0
		elif self.y > 400-40: self.y = 0
		elif self.x < 0: self.x = 400 -40
		elif self.y < 0: self.y = 400 - 40
	def move(self):
		self.update()
		self.correct()
		oldTail = self.tail
		self.tail = [Sprite(self.x, self.y, 'zet.png')]
		self.tail += oldTail
		while len(self.tail) > self.length: self.tail.pop()
		count = 0
		for each in self.tail:
			count += 1
			each.number = count
	def len(self):
		self.length += 1



coords = range(0,400-40, 40)
hero = Snake(choice(coords), choice(coords), 'zet.png')
zet = Sprite(choice(coords), choice(coords), 'hero.png')



done = True
while done:
	for e in pygame.event.get():
		if e.type == pygame.QUIT:
			done = False
		if e.type == pygame.KEYDOWN:
			if e.key == pygame.K_d: hero.side = 1
			elif e.key == pygame.K_s: hero.side =2
			elif e.key == pygame.K_a: hero.side =3
			elif e.key == pygame.K_w: hero.side = 4

	screen.fill((50,50,50))
	zet.render()
	hero.move()
	if hero.check(zet):
		zet.x = choice(coords)
		zet.y = choice(coords)
		hero.len()
	for each in hero.tail[1:]:
		if each.x == hero.x and each.y == hero.y:
			hero.length = each.number
	hero.render()
	window.blit(screen, (0,0))
	pygame.display.flip()
	pygame.time.delay(300)
	if hero.length <= 1:
		caption = "Hello Pygame"
	else: caption = "Your score is %d" %(hero.length -1)
	pygame.display.set_caption(caption)
